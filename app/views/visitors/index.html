<div class="loading-status" ng-if="busy">
  Loading...
</div>
<div class="widget">
  <div class="widget-head">
    <div class="pull-left"></div>
    <div class="widget-icons pull-right">
      <a class="fa fa-plus-circle btn btn-primary btn-sm" ui-sref="create-visitor-profile"> Create Visitor Profile</a>
    </div>
    <div class="clearfix"></div>
  </div>

  <div class="widget-content">
    <div class="padd">

      <div flash-alert active-class="in alert" class="alert fade">
        <span class="alert-message">{{flash.message}}</span>
      </div>

      <div ng-if="visitors.length">
        <table class="table table-striped table-condensed table-responsive table-bordered">
          <thead>
          <tr>
            <th>S/N</th>
            <th>Visitor's Names</th>
            <th>Visitor's Email</th>
            <th>Visitor's Phone</th>
            <th>Company Name</th>
            <th>Group Type</th>
            <th>Created Date</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr ng-repeat="visitor in visitors track by visitor.visitors_phone | paginationOffset:currentPage:itemsPerPage | orderBy: 'visitor.created'"
            ng-class="{'text-danger': getGroupType(visitor.group_type) === 'Banned'}">
            <td>{{ $index + 1 }}</td>
            <td>{{ visitor.first_name }} {{ visitor.last_name }}</td>
            <td>{{ visitor.visitors_email }}</td>
            <td>{{ visitor.visitors_phone }}</td>
            <td>{{ visitor.company_name }}</td>
            <td>
              <span class="label" ng-class="{'label-danger': getGroupType(visitor.group_type) === 'Banned',
                'label-warning': getGroupType(visitor.group_type) === 'Normal',
                'label-success': getGroupType(visitor.group_type) === 'Success'
                }">
                {{ getGroupType(visitor.group_type) }}
              </span>
            </td>
            <td>{{ visitor.created |date: 'dd MMM, yyyy' }}</td>
            <td>
              <a class="btn btn-primary btn-xs" ui-sref="edit-visitor-profile({visitor_id: visitor.uuid})"
                title="Edit {{ visitor.first_name }}'s details" ng-show="user.is_staff">
                <i class="fa fa-edit"></i> Edit
              </a>

              <a class="btn btn-success btn-xs" ui-sref="show-visitor({visitor_id: visitor.uuid})"
                 title="View {{ visitor.first_name }}'s details" ng-show="user.is_active">
                <i class="fa fa-eye"></i> View
              </a>

              <a class="btn btn-success btn-xs" ui-sref="create-appointment-visitor({visitor_id: visitor.uuid})"
                 title="Create appointment" ng-show="user.is_active">
                <i class="fa fa-plus-circle"></i> Create Appointment
              </a>
            </td>
          </tr>
          </tbody>
        </table>
        <br/>
        <div class="row">
          <div class="col-sm-6" style="padding-top: 15px;">
            Showing Page: {{currentPage}} of {{numPages}}
          </div>
          <div class="col-sm-6">
            <pagination total-items="totalItems" ng-model="currentPage" max-size="maxSize" class="pagination-sm pull-right"
                        boundary-links="true" rotate="false" items-per-page="itemsPerPage"></pagination>
          </div>
        </div>
      </div>

      <div class="alert alert-info" ng-if="!visitors.length">
        <p>
          No visitor's profile have been created. Click on the create visitor profile button to create one.
        </p>
      </div>
    </div>
    <div class="widget-foot">
      <!-- Footer goes here -->
    </div>
  </div>
</div>
